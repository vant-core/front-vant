{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Acer/Desktop/Vant/front-teste/services/api.ts"],"sourcesContent":["// src/services/api.ts\nimport axios from 'axios';\nimport {\n  ChatMessageDTO,\n  ChatApiResponse,\n  LoginDTO,\n  RegisterDTO,\n  EventRegistrationDTO\n} from '../types/index';\n\nconst api = axios.create({\n  baseURL: 'http://localhost:3000',\n  withCredentials: true\n});\n\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers = config.headers || {};\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n/* --------- AUTH --------- */\n\nexport const login = async (payload: LoginDTO) => {\n  try {\n    const { data } = await api.post('/api/auth/login', payload);\n    return data;\n  } catch (error: any) {\n    console.error('LOGIN ERROR:', error?.message, error?.response?.status, error?.response?.data);\n    throw error;\n  }\n};\n\nexport const register = async (payload: RegisterDTO) => {\n  const { data } = await api.post('/api/auth/register', payload);\n  return data;\n};\n\n/* --------- CHAT / AI --------- */\n\nexport const chatWithAI = async (\n  payload: ChatMessageDTO\n): Promise<ChatApiResponse> => {\n  const { data } = await api.post<ChatApiResponse>('/api/ai/chat', payload);\n  return data;\n};\n\n/* --------- EVENT REGISTRATION (exemplo) --------- */\n\nexport const saveEventRegistration = async (\n  payload: EventRegistrationDTO\n) => {\n  const { data } = await api.post('/api/events/registration', payload);\n  return data;\n};\n\nexport default api;\n"],"names":[],"mappings":"AAAA,sBAAsB;;;;;;;;;;;;;AACtB;;AASA,MAAM,MAAM,mJAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,iBAAiB;AACnB;AAEA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAA;IAC3B,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,OAAO;QACT,OAAO,OAAO,GAAG,OAAO,OAAO,IAAI,CAAC;QACpC,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT;AAIO,MAAM,QAAQ,OAAO;IAC1B,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI,CAAC,mBAAmB;QACnD,OAAO;IACT,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,gBAAgB,OAAO,SAAS,OAAO,UAAU,QAAQ,OAAO,UAAU;QACxF,MAAM;IACR;AACF;AAEO,MAAM,WAAW,OAAO;IAC7B,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI,CAAC,sBAAsB;IACtD,OAAO;AACT;AAIO,MAAM,aAAa,OACxB;IAEA,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI,CAAkB,gBAAgB;IACjE,OAAO;AACT;AAIO,MAAM,wBAAwB,OACnC;IAEA,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI,CAAC,4BAA4B;IAC5D,OAAO;AACT;uCAEe"}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Acer/Desktop/Vant/front-teste/context/apiContext.tsx"],"sourcesContent":["// src/contexts/ApiContext.tsx\n\"use client\";\n\nimport { createContext, useContext, useState, useCallback } from \"react\";\nimport api, {\n  chatWithAI,\n  login as apiLogin,\n  register as apiRegister,\n} from \"../services/api\";\nimport {\n  ChatMessageDTO,\n  ChatApiResponse,\n  LoginDTO,\n  RegisterDTO,\n} from \"../types/index\";\n\ninterface ApiContextValue {\n  token: string | null;\n  setToken: (t: string | null) => void;\n  chat: (payload: ChatMessageDTO) => Promise<ChatApiResponse>;\n  login: (payload: LoginDTO) => Promise<any>;\n  register: (payload: RegisterDTO) => Promise<any>;\n}\n\nconst ApiContext = createContext<ApiContextValue | undefined>(undefined);\n\nexport function ApiProvider({ children }: { children: React.ReactNode }) {\n  const [token, setTokenState] = useState<string | null>(() => {\n    if (typeof window === \"undefined\") return null;\n    return localStorage.getItem(\"token\");\n  });\n\n  const setToken = useCallback((t: string | null) => {\n    setTokenState(t);\n    if (typeof window === \"undefined\") return;\n    if (t) localStorage.setItem(\"token\", t);\n    else localStorage.removeItem(\"token\");\n  }, []);\n\n  const login = useCallback(\n    async (payload: LoginDTO) => {\n      const data = await apiLogin(payload);\n      console.log(\"LOGIN RESPONSE FRONT:\", data);\n\n      // AJUSTE AQUI se seu backend usa outro formato\n      // Exemplos de caminhos comuns:\n      // { token: \"...\" }\n      // { accessToken: \"...\" }\n      // { success: true, data: { token: \"...\" } }\n      const token =\n        data.token ||\n        data.accessToken ||\n        data?.data?.token ||\n        data?.data?.accessToken;\n\n      if (token) {\n        setToken(token);\n      } else {\n        console.warn(\n          \"Nenhum token encontrado na resposta de login. Ajuste o caminho do token no ApiContext.\"\n        );\n      }\n\n      return data;\n    },\n    [setToken]\n  );\n\n  const register = useCallback(async (payload: RegisterDTO) => {\n    const data = await apiRegister(payload);\n    return data;\n  }, []);\n\n  const chat = useCallback(async (payload: ChatMessageDTO) => {\n    const resp = await chatWithAI(payload);\n    return resp;\n  }, []);\n\n  // Sempre que o token muda, atualiza o header default do axios\n  if (token) {\n    api.defaults.headers.common.Authorization = `Bearer ${token}`;\n  } else {\n    delete api.defaults.headers.common.Authorization;\n  }\n\n  const value: ApiContextValue = {\n    token,\n    setToken,\n    chat,\n    login,\n    register,\n  };\n\n  return <ApiContext.Provider value={value}>{children}</ApiContext.Provider>;\n}\n\nexport const useApi = (): ApiContextValue => {\n  const ctx = useContext(ApiContext);\n  if (!ctx) throw new Error(\"useApi deve ser usado dentro de ApiProvider\");\n  return ctx;\n};\n"],"names":[],"mappings":"AAAA,8BAA8B;;;;;;;;AAG9B;AACA;;;AAHA;;;AAuBA,MAAM,2BAAa,IAAA,8KAAa,EAA8B;AAEvD,SAAS,YAAY,EAAE,QAAQ,EAAiC;;IACrE,MAAM,CAAC,OAAO,cAAc,GAAG,IAAA,yKAAQ;gCAAgB;YACrD;;YACA,OAAO,aAAa,OAAO,CAAC;QAC9B;;IAEA,MAAM,WAAW,IAAA,4KAAW;6CAAC,CAAC;YAC5B,cAAc;YACd;;YACA,IAAI,GAAG,aAAa,OAAO,CAAC,SAAS;iBAChC,aAAa,UAAU,CAAC;QAC/B;4CAAG,EAAE;IAEL,MAAM,QAAQ,IAAA,4KAAW;0CACvB,OAAO;YACL,MAAM,OAAO,MAAM,IAAA,2HAAQ,EAAC;YAC5B,QAAQ,GAAG,CAAC,yBAAyB;YAErC,+CAA+C;YAC/C,+BAA+B;YAC/B,mBAAmB;YACnB,yBAAyB;YACzB,4CAA4C;YAC5C,MAAM,QACJ,KAAK,KAAK,IACV,KAAK,WAAW,IAChB,MAAM,MAAM,SACZ,MAAM,MAAM;YAEd,IAAI,OAAO;gBACT,SAAS;YACX,OAAO;gBACL,QAAQ,IAAI,CACV;YAEJ;YAEA,OAAO;QACT;yCACA;QAAC;KAAS;IAGZ,MAAM,WAAW,IAAA,4KAAW;6CAAC,OAAO;YAClC,MAAM,OAAO,MAAM,IAAA,8HAAW,EAAC;YAC/B,OAAO;QACT;4CAAG,EAAE;IAEL,MAAM,OAAO,IAAA,4KAAW;yCAAC,OAAO;YAC9B,MAAM,OAAO,MAAM,IAAA,gIAAU,EAAC;YAC9B,OAAO;QACT;wCAAG,EAAE;IAEL,8DAA8D;IAC9D,IAAI,OAAO;QACT,6HAAG,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAC/D,OAAO;QACL,OAAO,6HAAG,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,aAAa;IAClD;IAEA,MAAM,QAAyB;QAC7B;QACA;QACA;QACA;QACA;IACF;IAEA,qBAAO,6LAAC,WAAW,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAC7C;GApEgB;KAAA;AAsET,MAAM,SAAS;;IACpB,MAAM,MAAM,IAAA,2KAAU,EAAC;IACvB,IAAI,CAAC,KAAK,MAAM,IAAI,MAAM;IAC1B,OAAO;AACT;IAJa"}}]
}